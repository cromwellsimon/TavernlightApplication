Q2 - Fix or improve the implementation of the below method

function printSmallGuildNames(memberCount)
    -- this method is supposed to print names of all guilds that have less than memberCount max members
    local selectGuildQuery = "SELECT name FROM guilds WHERE max_members < %d;"
    local resultId = db.storeQuery(string.format(selectGuildQuery, memberCount))
    local guildName = result.getString("name")
    print(guildName)
end











The problem with this is pretty obvious. A SQL query like that will obviously get a number of rows back which you'd need to enumerate through. I don't know what db library they're using but you'd need to do a for guildName in "name" and then print each of those individually.
Also, they're storing this in a resultId but they don't actually execute it, so "result" here is probably nil unless if db.storeQuery changes a global variable named "result" which seems unlikely.
Make a comment somewhere at the potential of SQL injection from the direct SQL query manipulation. Especially considering that this is client-side code, this should exist only on the server
Make a comment somewhere asking about the storeQuery and resultId and that, depending on the database used (such as SQL Server), something like this would definitely not exist but I don't know what database or database library they're using. Maybe resultId is a reference to the coroutine?